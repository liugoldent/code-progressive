---
description: 資安問題
tags: 
    - Information security
    - frontend
---

#  [FE] Information security - 資安問題
[資安這條路─以自建漏洞環境學習資訊安全](https://ithelp.ithome.com.tw/users/20108446/ironman/3463?page=2)
## XSS 攻擊
### 緣由：
* XSS：跨站腳本攻擊
* 解釋：攻擊者主要透過惡意腳本注入到受信任的網頁之中，從而在用戶的瀏覽器上執行這些惡意腳本
* 通常發生於：用戶交互功能的網頁應用程式中，如論壇or部落格or社交媒體。攻擊者常運用用戶對輸入的不充分過濾or驗證，惡意將程式插入到網頁中，當其他用戶使用此網頁時，他們的瀏覽器會執行這些惡意腳本。
### 導致：
* 盜取用戶的敏感訊息：攻擊者可以透過腳本來竊取用戶的登錄憑證、個人訊息、銀行帳號等機敏訊息
* 頁面竄改：透過修改網頁內容，如更改網頁的外觀or注入廣告or重新導向達到惡意攻擊
### 種類：  
* 儲存型XSS：將腳本儲存在目標網站的server上，並在用戶訪問頁面時執行
* 反射型XSS：惡意腳本將URL參數發給目標網站，網站將惡意腳本反射回用戶的瀏覽器
* DOM型XSS：修改網頁DOM結構，導致瀏覽器執行惡意操作。
### 如何防止：
* 輸入驗證or過濾：對用戶輸入的數據進行驗證or過濾，確保只接受預期的數據格式，並對特殊符號進行轉譯or過濾
* 輸出編碼：將用戶輸入的數據輸出到網頁時，使用合適的編碼進行轉譯，防止腳本執行。
* 使用安全的開發框架or庫：經過安全審查的框架or庫，這些通常提供內置的防護機構來防止XSS攻擊
* 定期更新和修補bug
### 用戶端防止：
* 保持瀏覽器的更新：瀏覽器會實施一些安全措施來減少XSS攻擊的風險
* 審慎點擊連結
* 使用安全插件

## CORS攻擊、CSRF攻擊
### 緣由：
* 利用瀏覽器同源政策的限制，使攻擊者可以跨域訪問受限資源
* 同源政策使瀏覽器的安全限制，他要求網頁只能訪問其來源相同的資源。這種限制防止了網頁對其他網域下資源的直接訪問，從而保護用戶的隱私和安全。
* 然而如果server為正確配置CORS策略，就可能存在CORS攻擊的風險。攻擊者可以通過建造惡意網頁，在用戶的瀏覽器上進行跨域請求，並利用某些條件下瀏覽器的行為，從而獲得機敏訊息和未經授權的操作。

### 常見場景
* 跨域偽造（Cross Site Request Forgery - CSRF）：攻擊者構造一個惡意網頁，在用戶的瀏覽器發送跨域請求來執行某些操作，如更改用戶密碼、發起資金轉賬之類的
* 盜取跨域資源：利用漏洞，將機敏訊息從受限網域發送到攻擊者的網域
* 釣魚攻擊：創造一個偽造的跨域網站，誘使用戶輸入敏感訊息，將這些信息發送到攻擊者的server
* 參考[讓我們來談談CSRF](https://blog.techbridge.cc/2017/02/25/csrf-introduction/)

### 開發人員如何防止？
* server建造正確的CORS策略：服務器應配置適當的CORS響應head，明確指定允許跨域的訪問源、方法、head等
* 使用CSRF防護機制：對於可能受到CSRF的操作，採用適當的防護機制，如token等
* 驗證與授權：在服務端請求進行驗證or授權，確保只有經過身份驗證與授權的用戶才能訪問資源。
* 在用戶瀏覽網頁時，一開始打開網頁時，可以給一個CSRF token，而當用戶要提交時，則要夾帶這個token去做驗證。但是也會產生另一個問題：如果網站支持跨域的request，這個方法就破了
* Double Submit Cookie：由server隨機產生一組token並且加在form上。但不同點在於不用把這個值寫在session外，同時在client side端設定一個名叫csrftoken的cookie，值也是token
    * 使用方式：當使用者按下submit時，server去比對cookie內的csfrtoken與form裡的csrftoken，檢查是否有值並且相等，就知道是不是使用者發的。

## Cookie & Session 基本知識
* Cookie是將狀態存在Client端
* Session是將資料存在Server端
* Session是用來彌補Cookies的不足
* Cookie size限制：4096byte。而且一個Domain只能有20個cookies
* 佔據網路流量：由於每次request都必須將Cookie資料放在header，所以當Cookies變大時，requests也會跟著變大，過大的請求會導致影響速度。

## Cookie
### 基本資訊
* domain & path：設定關於Cookie的網域與路徑
* expires & max-age：設定Cookie資料過期的時間。expires必須是日期。max-age為秒數
* size：為cookie資料的大小，單位byte。
### 問題
* 安全性問題：Cookie為儲存在用戶瀏覽器的文本，可以被惡意竄改，又或是包含機敏問題，有可能導致安全漏洞和數據洩漏
* XSS攻擊：如果未正確處理用戶輸入，惡意腳本可以注入到網站中，透過Cookie竊取用戶信息或執行惡意操作
* CSRF（跨域請求偽造）攻擊：攻擊者利用特定請求欺騙用戶點擊連結or訪問惡意網站，從而利用用戶身份在受信任網站上執行未經授權的操作。
* 隱私問題：Cookie可能存有個人信息（如偏好設置、瀏覽歷史），用戶隱私權受到侵犯
* 性能影響：Cookie會增加HTTP請求大小，從而增加傳輸時間或帶寬消耗。過多或過大的Cookie會對性能造成影響
### 解決：
* 採用安全標誌：確保Cookie設置為僅通過HTTPS連接傳輸，並將Secure & HttpOnly標誌設定為True
* 限制Cookie的網域與路徑，僅在必要時設置Cookie
* 縮小Cookie的有效期限：將Cookie的有效期限在必要的時間範圍內，避免長期儲存敏感訊息
* 對用戶輸入進行驗證或轉譯：在處理Cookie時，始終要進行驗證防止XSS
* 防範CSRF



## session
### Session Hijacking
* 攻擊者透過擷取有效的Session ID來劫持用換的Session，一但擷取成功，他們就可以冒充合法用戶，訪問用戶的帳戶和機敏

### Session Fixation
* 攻擊者透過自己產生的一組session ID，將這組ID給客戶使用，這樣攻擊者就可以去獲取用戶的訪問權限

### Session Cracking
* 攻擊者透過猜測或暴力解破解sessionID

