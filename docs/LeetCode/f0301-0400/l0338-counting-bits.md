---
description: "LeetCode 338 Counting Bits é¡Œè§£ï¼šä½¿ç”¨å‹•æ…‹è¦åŠƒ + ä½å…ƒé‹ç®—è§£æ³•ï¼ˆJavaScriptï¼‰ï¼Œè©³ç´°è§£é‡‹ dp[i] = dp[i >> 1] + (i & 1) çš„é‚è¼¯ï¼Œä¸¦æ•´ç†ä½å…ƒæŠ€å·§èˆ‡å»¶ä¼¸é¡Œç›®ã€‚"
date: 2025-06-18
tags: [LeetCode, JavaScript, Bit Manipulation, DP, Dynamic Programming, ä½å…ƒé‹ç®—, Blind75]
---

# [0338] Counting Bits

> é›£åº¦ï¼šEasy  
> é¡Œå‹åˆ†é¡ï¼š`ä½å…ƒæ“ä½œï¼ˆBit Manipulationï¼‰` + `å‹•æ…‹è¦åŠƒï¼ˆDPï¼‰`  
> é¡Œç›®é€£çµï¼š[LeetCode 338 - Counting Bits](https://leetcode.com/problems/counting-bits/)

---

## ğŸ“˜ é¡Œç›®æè¿°

çµ¦å®šä¸€å€‹éè² æ•´æ•¸ `n`ï¼Œè«‹å»ºç«‹ä¸€å€‹é™£åˆ— `ans`ï¼Œå…¶ä¸­ï¼š

- `ans[i]` è¡¨ç¤ºæ•´æ•¸ `i` çš„**äºŒé€²ä½è¡¨ç¤ºä¸­å‡ºç¾å¤šå°‘å€‹ 1**

---

### ğŸ§ª ç¯„ä¾‹

```txt
Input: n = 5
Output: [0,1,1,2,1,2]

è§£é‡‹ï¼š
0 â†’ 000 â†’ 0 å€‹ 1
1 â†’ 001 â†’ 1 å€‹ 1
2 â†’ 010 â†’ 1 å€‹ 1
3 â†’ 011 â†’ 2 å€‹ 1
4 â†’ 100 â†’ 1 å€‹ 1
5 â†’ 101 â†’ 2 å€‹ 1
```

## ğŸ§  è§£é¡Œæ€è·¯ï¼šå‹•æ…‹è¦åŠƒï¼ˆDPï¼‰+ ä½å…ƒæ“ä½œ
### ç‚ºä»€éº¼å¯ä»¥ç”¨ DPï¼Ÿ
å› ç‚ºæˆ‘å€‘å¯ä»¥å¾å°çš„æ•¸å­—æ¨å‡ºå¤§çš„æ•¸å­—ã€‚
å…·é«”ä¾†èªªï¼šdp[i] å¯ä»¥å¾ dp[i >> 1]ï¼ˆä¹Ÿå°±æ˜¯ i çš„ä¸€åŠï¼‰æ¼”è®Šå‡ºä¾†ï¼


## ğŸ“ˆ æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦åˆ†æ

| é …ç›®    | è¤‡é›œåº¦             |
| ----- | --------------- |
| æ™‚é–“è¤‡é›œåº¦ | O(n)ï¼ˆæ¯å€‹ i è¨ˆç®—ä¸€æ¬¡ï¼‰ |
| ç©ºé–“è¤‡é›œåº¦ | O(n)ï¼ˆå„²å­˜ dp é™£åˆ—ï¼‰  |

## ğŸ’» JavaScript è§£æ³•ï¼ˆO(n) æ™‚é–“è¤‡é›œåº¦ï¼‰

```js
/**
 * @param {number} n
 * @return {number[]}
 */
var countBits = function(n) {
    const dp = new Array(n + 1).fill(0); // åˆå§‹å€¼ï¼šå…¨ç‚º 0

    for (let i = 1; i <= n; i++) {
        dp[i] = dp[i >> 1] + (i & 1);
    }

    return dp;
};

```

## å»¶ä¼¸é¡Œç›®
```txt
191	Number of 1 Bits	ä½å…ƒè¨ˆæ•¸ï¼ˆBrian Kernighanï¼‰
137	Single Number II	bit mask ç‹€æ…‹ç®¡ç†
136	Single Number	XOR é‹ç®—æŠ€å·§
268	Missing Number	ç¸½å’Œå·®èˆ‡ XOR æ¯”è¼ƒ
```